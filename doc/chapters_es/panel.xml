<?xml version="1.0" encoding="iso-8859-1"?>

 <?PSGML NOFILL programlisting example informalequation?>

  <chapter id="c-panel">
    <title>Datos de Panel</title>

    <sect1 id="panel-structure">
      <title>Estructura de Panel</title>

      <para>Los datos de panel (una muestra combinada de datos de series
      temporales y de sección cruzada) requieren un cuidado especial. He aquí
      algunas observaciones a tener en cuenta.</para>

      <para>Considérese un conjunto de datos consistente en observaciones de
      <emphasis>n</emphasis> unidades de sección cruzada (países,
      provincias, personas, etc.) durante <emphasis>T</emphasis> periodos. Supongamos 
      que cada observación contiene los valores de <emphasis>m</emphasis>
      variables de interés. El conjunto de datos está formado entonces por
      <emphasis>mnT</emphasis> valores.</para>

      <para>Los datos deben de ordenarse <quote>por observación</quote>: cada fila
      representa una observación; cada columna contiene los valores de una
      variable en particular. La matriz de datos tiene entonces
      <emphasis>nT</emphasis> filas y <emphasis>m</emphasis> columnas. Esto
      deja abierta la cuestión de cómo ordenar las filas. Existen dos
      posibilidades.<footnote><para>Si no queremos diferenciar de manera
      conceptual o estadística entre variaciones muestrales y temporales,
      podemos ordenar las filas de modo arbitrario, pero esto es probablemente
      un derroche de datos.</para></footnote></para>

      <itemizedlist>
        <listitem>
          <para>Filas agrupadas por <emphasis>unidad</emphasis>. Piénsese en
          la matriz de datos como si estuviera compuesta de
          <emphasis>n</emphasis> bloques, cada uno con <emphasis>T</emphasis>
          filas. El primer bloque de <emphasis>T</emphasis> filas contiene las
          observaciones de la unidad 1 de la muestra para cada uno de los
          periodos; el siguiente bloque contiene las observaciones de la
          unidad 2 para todos los periodos; y así sucesivamente. De hecho, la
          matriz de datos es un conjunto de datos de series temporales
          apilados verticalmente.</para>
        </listitem>

        <listitem>
          <para>Filas agrupadas por <emphasis>periodo</emphasis>. Piénsese en
          la matriz de datos como si estuviera compuesta por
          <emphasis>T</emphasis> bloques, cada uno con <emphasis>n</emphasis>
          filas. La primera de las <emphasis>n</emphasis> filas contiene las
          observaciones de cada unidad muestral en el periodo 1; el siguiente
          bloque contiene las observaciones de todas las unidades en el
          periodo 2; y así sucesivamente. La matriz de datos es un conjunto de
          datos de muestras de sección cruzada, apiladas verticalmente.</para>
        </listitem>
      </itemizedlist>

      <para>Puede utilizarse el esquema que resulte más conveniente. El
      primero es quizá más fácil de mantener ordenado. Si se utiliza el
      segundo, hay que asegurarse de que las unidades de sección cruzada
      aparezcan en el mismo orden en cada uno de los bloques de datos de cada
      periodo.</para>

      <para>En cualquiera de los dos casos se puede utilizar el campo frecuencia
      en la línea <emphasis>observaciones</emphasis> del archivo de
      cabecera de datos (véase el <xref linkend="c-datafiles" />) para que el
      asunto resulte un poco más sencillo.</para>

      <itemizedlist>
        <listitem>
          <para><emphasis>Agrupados por unidades</emphasis>: Establecer la frecuencia
          igual a <emphasis>T</emphasis>. Supongamos que hay observaciones
          sobre 20 unidades durante 5 periodos de tiempo. En este caso, la
          línea de observaciones más apropiada es la siguiente:
          <literal>5 1.1 20.5</literal> (léase: frecuencia 5, empezando con la
          observación de la unidad 1, en el periodo 1, y finalizando con la
          observación de la unidad 20, periodo 5). Entonces, por ejemplo, la
          observación de la unidad 2 en el periodo 5 puede ser referenciada
          como <literal>2.5</literal>, y la correspondiente a la unidad 13 en
          periodo 1 como <literal>13.1</literal>.</para>
        </listitem>

        <listitem>
          <para><emphasis>Agrupado por periodos</emphasis>: Establecer la frecuencia
          igual a <emphasis>n</emphasis>. En este caso, si hay observaciones
          sobre 20 unidades en cada uno de los 5 periodos, la línea de
          observaciones debería ser: <literal>20 1.01 5.20</literal> (léase:
          frecuencia 20, empezando con la observación del periodo 1, unidad
          01, y finalizando con la observación del periodo 5, unidad 20). Así,
          nos referiremos a la observación de la unidad 2, periodo 5 como
          <literal>5.02</literal>.</para>
        </listitem>
      </itemizedlist>

      <para>Si se construye un conjunto de datos de panel utilizando un
      programa de hoja de cálculo para después importar los datos a
      <application>gretl</application>, puede ser que el programa no
      reconozca, al principio, la clase especial de los datos. Esto se puede
      arreglar mediante la instrucción <command>setobs</command> (véase el <xref
      linkend="c-cmdref" />) o la opción del menú GUI <quote>Muestra, Seleccionar frecuencia, 
      observación inicial...)</quote>.</para>
    </sect1>

    <sect1 id="dummies">
      <title>Variables ficticias</title>

      <para>En un estudio de panel puede que se desee construir variables
      ficticias de uno o ambos tipos descritos a continuación: (a) variables
      ficticias como identificadores de las unidades muestrales, y (b)
      variables ficticias como identificadores de los periodos de tiempo. El
      primer método puede utilizarse para permitir que el intercepto de la
      regresión sea diferente en diferentes unidades, y el segundo para
      permitir lo mismo en diferente periodos.</para>

      <para>Hay dos opciones especiales para crear estas variables ficticias.
      Se encuentran dentro del menú <quote>Datos, Añadir
      variables</quote> en el GUI, o en la instrucción <command>genr</command> en
      el modo lote de instrucciones, o <application>gretlcli</application>.</para>

      <orderedlist>
        <listitem>
          <para><quote>variables ficticias periódicas</quote>
          (lote de instrucciones: <command>genr dummy</command>). Esta instrucción
          normalmente se utiliza para crear variables ficticias periódicas
          hasta la frecuencia de datos en los estudios de series temporales
          (por ejemplo un conjunto de variables ficticias trimestrales para ser utilizado en
          corrección estacional). No obstante, también funciona con datos de
          panel. Nótese que la interpretación de las variables ficticias creadas
          mediante esta instrucción difiere dependiendo de si las filas de datos
          están agrupadas por unidad o por periodo. Si están agrupadas según
          <emphasis>unidades</emphasis> (frecuencia <emphasis>T</emphasis>)
          las variables resultantes son <emphasis>variables ficticias periódicas</emphasis>
          y habrá un número <emphasis>T</emphasis> de ellas. Por ejemplo,
          <varname>dummy_2</varname> tendrá el valor 1 en cada fila de datos
          correspondiente a una observación del periodo 2, o 0 en caso
          contrario. Si están agrupadas según <emphasis>periodos</emphasis>
          (frecuencia <emphasis>n</emphasis>) entonces se generaran
          <emphasis>n</emphasis> <emphasis>variables ficticias unitarias</emphasis>:
          <varname>dummy_2</varname> tendrá el valor 1 en cada fila de datos
          asociada con la unidad muestral 2, o 0 en caso contrario.</para>
        </listitem>

        <listitem>
          <para><quote>Variables ficticias de panel</quote> (en modo consola
          <command>genr paneldum</command>). Esta instruccion crea todas
          las variables ficticias, de cada unidad y periodo, de golpe. Se supone que por
          defecto, las filas de datos están agrupadas por unidades. Las
          variables ficticias de cada unidad se denominan <varname>du_1</varname>,
          <varname>du_2</varname> y así sucesivamente, mientras que las
          variables ficticias periódicas se llaman <varname>dt_1</varname>,
          <varname>dt_2</varname>, etc. Es incorrecto utilizar la <varname>u</varname> (por
          unidad) y la <varname>t</varname> (por tiempo) en estos nombres si las 
	  filas de datos están agrupadas por periodos: su
          utilización correcta en este contexto se hace mediante
          <command>genr paneldum -o</command> (sólo en modo lote de instrucciones).</para>
        </listitem>
      </orderedlist>

      <para>Si el conjunto de datos de panel contiene el año <literal>YEAR</literal>
      como una de las variables, es posible crear un periodo ficticio para de
      escoger algún año en particular como en este ejemplo <command>genr dum =
      (YEAR=1960)</command>. También es posible crear variables ficticias
      periódicas utilizando el operador de módulo, <literal>%</literal>. Por
      ejemplo, para crear una variable ficticia con valor 1 para la
      primera observación y cada treinta observaciones y 0 en lo demás casos, se puede hacer lo
      siguiente</para>

    <programlisting>
      genr index
      genr dum = ((index-1)%30) = 0
    </programlisting>

    </sect1>

    <sect1 id="panel-lagged">
      <title>Uso de valores retardados con datos de panel</title>

      <para>Si los periodos de tiempo están divididos en intervalos regulares,
      quizá queramos usar los valores retardados de las variables en una
      regresión de panel. En este caso es preferible agrupar las filas de datos
      por <emphasis>unidades</emphasis> (series temporales apiladas).</para>

      <para>Supongamos que creamos un retardo de la variable
      <varname>x1</varname>, utilizando <command>genr x1_1 = x1(-1)</command>.
      Los valores de esta variable serán en general correctos, pero en los
      límites de los bloques de datos de cada unidad son <quote>
      utilizables</quote>: el valor <quote>previo</quote> no es realmente el
      primer retardo de <varname>x1_1</varname>, si no más bien la última
      observación de <varname>x1</varname> para la unidad muestral previa.
      <application>Gretl</application> marca estos valores como
      ausentes.</para>

      <para>Si hay que incluir un retardo de este tipo en una regresión, hay
      que asegurarse de que la primera observación de cada bloque o unidad no
      esté incluida. Un modo de hacer esto es mediante Mínimos Cuadrados
      Ponderados (<command>wls</command>) utilizando una variable ficticia
      apropiada como ponderación. Esta variable ficticia (vamos a denominarla
      <command>lagdum</command>) debe tener el valor 0 para las observaciones
      a descartar, y 1 en el caso contrario. Es decir, es complementaria a una
      variable para el periodo 1. De este modo, si hemos utilizado la instrucción<command>
      genr dummy</command> podemos teclear <command>genr lagdum = 1 - dummy_1</command>.
      En caso de que hubiéramos utilizado <command>genr paneldum</command>
      ahora tendríamos que teclear <command>genr lagdum = 1 - dt_1</command>.
      De cualquier manera, la siguiente instrucción sería</para>

      <para><command>wls lagdum y const x1_1 ...</command></para>

      <para>para obtener una regresión combinada utilizando el primer retardo
      de <varname>x1</varname>, descartando todas las observaciones del
      periodo 1.</para>

      <para>Otra opción es utilizar <command>smpl</command> con la marca
      <command>-o</command> y una variable ficticia apropiada. El <xref
      linkend="examp-pwt" /> muestra unas instrucciones de ejemplo, suponiendo que
      cada bloque de datos de cada unidad contiene 30 observaciones y queremos
      descartar la primera fila de cada uno. Podemos entonces ejecutar las
      regresiones sobre el conjunto de datos restringido sin tener que usar la
      instrucción <command>wls</command>. Si se desea reutilizar el conjunto de
      datos restringido, podemos guardarlo mediante la instrucción
      <command>store</command> (véase el <xref linkend="c-cmdref" /> más abajo).</para>

      <example id="examp-panel-lags">
        <title>Retardos con datos de panel</title>
    <programlisting>
      (* crear la variable índice *)
      genr index
      (* crear dum = 0 para cada 30 observaciones *)
      genr dum = ((index-1)%30) > 0
      (* establecer la muestra por medio de esa variable ficticia *)
      smpl -o dum
      (* crear de nuevo la estructura de observaciones, para 56 unidades *)
      setobs 29 1.01 56.29
    </programlisting>
      </example>

    </sect1>

    <sect1 id="pooled-est">
      <title>Estimación combinada</title>

      <para>Llegados a este punto, podemos revelar que hay una instrucción de
      estimación con el propósito especial de ser utilizado con datos de
      panel, la opción <quote>MCO combinados</quote> en el menú
      <guimenu>Modelo</guimenu>. Esta instrucción sólo está disponible cuando se
      reconoce el conjunto de datos como un panel. Para aprovechar esta
      opción, es preciso especificar un modelo que no contenga ninguna
      variable ficticia para representar unidades de sección cruzada. La
      rutina presenta estimaciones sencillas de MCO combinadas,
      que tratan de igual manera las variaciones de sección cruzada y de
      series temporales. Este modelo puede que sea el apropiado o no. En el
      menú <guimenu>Contrastes</guimenu> en la ventana de modelo, se
      encuentra una opción llamada <quote>Diagnósticos de panel</quote>, la cual plantea
      el contraste de MCO combinados contra las principales
      alternativas, es decir, los modelos de efectos fijos o de efectos
      aleatorios.</para>

      <para>El modelo de efectos fijos añade una variable ficticia a todas
      menos una de las unidades de sección cruzada, permitiendo que varíe el
      intercepto de la regresión en cada unidad. Se presenta un contraste
      <emphasis>F</emphasis> para la significación conjunta de estas variables
      ficticias: si el valor p para este contraste es
      pequeño, entonces se rechaza la hipótesis nula (de que un simple modelo
      combinado es adecuado) en favor de un modelo de efectos fijos.</para>

      <para>Por otro lado, el modelo de efectos aleatorios descompone la
      varianza residual en dos partes, una parte específica a la unidad de
      sección cruzada o <quote>grupo</quote> y la otra específica a una
      observación en particular. (Este estimador sólo puede calcularse cuando
      el panel es lo suficientemente <quote>amplio</quote>, es decir, cuando
      el número de unidades de sección cruzada en el conjunto de datos excede
      el número de parámetros a estimar.) El contraste LM de Breusch-Pagan
      comprueba la hipótesis nula (una vez más, de que el estimador de MCO
      combinados es adecuado) contra la alternativa de efectos aleatorios.</para>

      <para>Cabe dentro de lo posible que el modelo MCO
      combinados sea rechazado contra las dos alternativas de efectos
      fijos y aleatorios. Entonces la pregunta es, ¿cómo podemos valorar los
      méritos relativos de los estimadores alternativos? El contraste de
      Hausman (también incluido en el informe, siempre que el modelo de
      efectos aleatorios se pueda estimar) intenta resolver este problema. El
      estimador de efectos aleatorios es más eficiente que el estimador de
      efectos fijos, siempre y cuando el error especifico a la unidad o grupo
      no esté correlacionado con las variables independientes; si no es así,
      el estimador de efectos aleatorios es inconsistente, en cuyo caso es
      preferible el estimador de efectos fijos. La hipótesis nula para el
      contraste de Hausman dice que el error especifico al grupo no esta tan
      correlacionado (y por lo tanto es preferible el modelo de efectos
      aleatorios). Por lo tanto, un valor p pequeño para este contraste supone rechazar el modelo de efectos
      aleatorios en favor del modelo de efectos fijos.</para>

      <para>Para una discusión más rigurosa sobre este tema, véase Greene
      (2000), capítulo 14.</para>
    </sect1>

    <sect1 id="PWT">
      <title>Ilustración: La Tabla Mundial de Penn</title>

      <para>La Tabla Mundial de Penn (Penn World Table) (dirección <ulink
      url="http://pwt.econ.upenn.edu/">pwt.econ.upenn.edu</ulink>) es un
      excelente conjunto de datos macroeconómicos de panel, que incluye
      datos sobre 152 países entre los años 1950-1992. Los datos están
      disponibles en formato <application>gretl</application>; véase el sitio
      web de datos de <application>gretl</application> <ulink
      url="http://gretl.sourceforge.net/gretl_data.html"></ulink>
      (se puede descargar gratuitamente, aunque no está incluido en el paquete
      principal de <application>gretl</application>).</para>

      <para>El <xref linkend="examp-pwt" /> de abajo abre <filename>pwt56_60_89.gdt</filename>,
      un conjunto parcial de la pwt que contiene datos sobre 120 países, entre
      los años 1960-89, para 20 variables, sin que haya ninguna observación
      ausente (el conjunto de datos completo, que también está incluido en el
      paquete pwt para <application>gretl</application>, contiene muchas
      observaciones con valores ausentes). El total de crecimiento del PIB
      real, entre 1960-89, se calcula para cada país y se regresa contra el
      nivel real del PIB en 1960, para ver si hay indicios de
      <quote>convergencia</quote> (es decir, crecimiento más rápido en los países
      que empezaron con el nivel más bajo).</para>

      <example id="examp-pwt">
        <title>Uso de la tabla mundial de Penn</title>
      <programlisting>
      open pwt56_60_89.gdt
      (*
      para 1989 (última observación), el retardo 29 da 1960,
      la primera observación
      *)
      genr gdp60 = RGDPL(-29)
      (*
      encontrar el crecimiento total del PNB total
      durante 30 años
      *)
      genr gdpgro = (RGDPL - gdp60)/gdp60
      (* restringir la muestra a la sección cruzada de año 1989 *)
      smpl -r YEAR=1989
      (*
      ¿Hay convergencia?  ¿los países con una base menor,
      crecieron mas rápido?
      *)
      ols gdpgro const gdp60
      (* resultado: ¡No! Intentar la relación inversa *)
      genr gdp60inv = 1/gdp60
      ols gdpgro const gdp60inv
      (* No otra vez.  ¿Intentar prescindir de Africa? *)
      genr afdum = (CCODE = 1)
      genr afslope = afdum * gdp60
      ols gdpgro const afdum gdp60 afslope
      </programlisting>
      </example>
    </sect1>
  </chapter>

  <!-- Keep this comment at the end of the file
Local variables:
sgml-default-dtd-file:"../manual.ced"
mode: xml
sgml-parent-document:("../manual.xml" "book" "chapter")
End:
-->


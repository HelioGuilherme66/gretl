  <chapter id="modes"><title>Modes of working</title>

  <sect1 id="scripts"><title>Command scripts</title>

    <para>
      As you execute commands in <application>gretl</application>,
      using the GUI and filling in dialog entries, those commands are
      recorded in the form of a <quote>script</quote> or batch file.
      Such scripts can be edited and re-run, using either
      <application>gretl</application> or the command-line client,
      <application>gretlcli</application>.</para>

    <para>
      To view the current state of the script at any point in a
      <application>gretl</application> session, choose <quote>Command
	log</quote> under the File menu. This log file is called
      <filename>session.inp</filename> and it is overwritten whenever
      you start a new session.  To preserve it, save the script under
      a different name.  Script files will be found most easily, using
      the GUI file selector, if you name them with the extension
      <quote><filename>.inp</filename></quote>.</para>

    <para>To open a script you have written independently, use the
      <quote>File, Open command file</quote> menu item; to create a
      script from scratch use the <quote>File, New command
      file</quote> item.  In either case a script window will open
      (see <xref linkend="fig-scriptwin"/>).</para>

    <figure id="fig-scriptwin" float="1" pgwide="1">
     <title>Script window, editing a command file</title>
     <screenshot>
        <screeninfo>Script window</screeninfo>
        <graphic fileref="figures/scriptwin" align="center"/>
     </screenshot>
    </figure>

    <para>The toolbar at the botton left of the script window offers
      the following functions (left to right): (1) Save the file; (2)
      Save the file under a specified name; (3) Execute the commands
      in the file; (4) Copy selected text; (5) Paste the selected
      text; (6) Find and replace text; (7) Undo the last Paste or
      Replace action; (8) Help (if you place the cursor in a command
      word and press the question mark you will get help on that
      command); (9) Close the window.</para>

    <para>These functions (and in addition a Print option) may also be
    found under the <quote>File</quote> and <quote>Edit</quote> menus
    at the top of the script window.</para>

    <para>When you click the Execute icon or choose the <quote>File,
	Run</quote> menu item all output is directed to a single
      window, where it can be edited, saved or copied to the
      clipboard.</para>

    <para>To learn more about the possibilities of scripting, take a
      look at the <application>gretl</application> Help item
      <quote>Script commands syntax,</quote> or start up the
      command-line program <application>gretlcli</application> and
      consult its help, or consult <xref linkend="cmdref"/> in this
      manual. In addition, the <application>gretl</application>
      package includes over 70 <quote>practice</quote> scripts.  Most
      of these relate to Ramanathan (2002), but they may also be used
      as a free-standing introduction to scripting in
      <application>gretl</application> and to various points of
      econometric theory.  You can explore the practice files under
      <quote>File, Open command file, practice file</quote>  There you
      will find a listing of the files along with a brief description
      of the points they illustrate and the data they employ.  Open
      any file and run it (<quote>File, Run</quote> in the resulting
      script window) to see the output.</para>

    <para>Note that long commands in a script can be broken over two
      or more lines, using backslash as a continuation
      character.</para>

    <para>You can, if you wish, use the GUI controls and the scripting
      approach in tandem, exploiting each method where it offers
      greater convenience.  Here are two suggestions.</para>

    <itemizedlist>
      <listitem><para>Open a data file in the GUI.  Explore the data
	  &mdash; generate graphs, run regressions, perform tests.
	  Then open the Command log, edit out any redundant commands,
	  and save it under a specific name. Run the script to
	  generate a single file containing a concise record of your
	  work.</para></listitem>
      <listitem><para>Start by establishing a new script file.  Type
	  in any commands that may be required to set up
	  transformations of the data (see the <command>genr</command>
	  command in <xref linkend="cmdref"/> below). Typically this
	  sort of
	  thing can be accomplished more efficiently via commands
	  assembled with forethought rather than point-and-click. Then
	  save and run the script: the GUI data window will be updated
	  accordingly. Now you can carry out further exploration of
	  the data via the GUI. To revisit the data at a later point,
	  open and rerun the <quote>preparatory</quote> script
	  first.</para></listitem>
    </itemizedlist>

    <para>A further option is available for your computing
      convenience. Under <application>gretl</application>'s File menu
      you will find the item <quote>Gretl console</quote>.  This opens
      up a window in which you can type commands and execute them one
      by one (by pressing the Enter key) interactively.  This is
      essentially the same as <application>gretlcli</application>'s
      mode of operation, except that (a) the GUI is updated based on
      commands executed from the console, enabling you to work back
      and forth as you wish, and (b)
      <application>gretl</application>'s Monte Carlo loop routine (see
      <xref linkend="monte-carlo"/>) is not at present available in
      this mode.</para>

  </sect1>

  <sect1 id="session"><title>The <quote>session</quote>
      concept</title>

    <sect2 id="session-intro"><title>Introduction</title>

      <para>
	<application>gretl</application> offers the idea of a
	<quote>session</quote> as a way of keeping track of your work
	and revisiting it later.  This is somewhat experimental; I
	would be interested in hearing people's reactions.</para>

      <para>
      The basic idea is to provide an iconic space containing various
	objects pertaining to your current working session (see
      <xref linkend="fig-session"/>).  You can add objects
	(represented by icons) to this space as you go along.  If you
	save the session, these added objects should be available
	again if you re-open the session later.</para>

      <para>
	If you start <application>gretl</application> and open a data
	set, then select <quote>Icon view</quote> from the Session
	menu, you should see the basic default set of icons: these
	give you quick access to the command script
	(<quote>Session</quote>), information on the data set (if
	any), correlation matrix (<quote>Corrmat</quote>) and
	descriptive summary statistics (<quote>Summary</quote>). All
	of these are activated by double-clicking the relevant icon.
	The <quote>Data set</quote> icon is a little more complex:
	double-clicking opens up the data in the built-in spreadsheet,
	but you can also right-click on the icon for a menu of other
	actions.</para>

      <tip><para>In many <application>gretl</application> windows, the
	  right mouse button brings up a menu with common
	  tasks.</para></tip>

      <para>Two sorts of objects can be added to the Icon View window:
	models and graphs.</para>  

      <figure id="fig-session" float="1" pgwide="1">
	<title>Icon view: one model and one graph have been added to
	  the default icons</title>
	<screenshot>
	  <screeninfo>Session window</screeninfo>
	  <graphic fileref="figures/session" align="center"/>
	</screenshot>
      </figure>

      <para>To add a model, first estimate it using the Model menu.
	Then pull down the File menu in the model window and select
	<quote>Save to session as icon&hellip;</quote> or <quote>Save
	  as icon and close</quote>.  Simply hitting the
	<literal>S</literal> key over the model window is a shortcut
	to the latter action.</para>

      <para>To add a graph, first create it (under the Data menu,
	<quote>Graph specified vars</quote>, or via one of
	<application>gretl</application>'s other graph-generating
	commands).  Click on the graph window to bring up the graph
	menu, and select <quote>Save to session as
	  icon</quote>.</para>

      <para>Once a model or graph is added its icon should appear in
	the Icon View window.  Double-clicking on the icon redisplays
	the object, while right-clicking brings up a menu which lets
	you display or delete the object.  This popup menu also gives
	you the option of editing graphs.</para>

    </sect2>

    <sect2 id="model-table"><title>The model table</title>   

      <para>
	In econometric research it is common to estimate several
	models with a common dependent variable &mdash; the models
	differing in respect of which independent variables are
	included, or perhaps in respect of the estimator used.  In
	this situation it is convenient to present the regression
	results in the form of a table, where each column contains the
	results (coefficient estimates and standard errors) for a
	given model, and each row contains the estimates for a given
	variable across the models.</para>

      <para>
	In the Icon View window <application>gretl</application>
	provides a means of constructing such a table (and copying it
	in plain text, &latex; or Rich Text Format).  Here is how to do
	it:</para>

	<orderedlist>
	  <listitem><para>Estimate a model which you wish to include
	      in the table, and in the model display window, under the
	      File menu, select <quote>Save to session as icon</quote>
	      or <quote>Save as icon and close</quote>.</para>
	  </listitem>
	  <listitem><para>Repeat step 1 for the other models to be
	      included in the table (up to a total of six
	      models).</para>
	  </listitem>
	  <listitem><para>When you are done estimating the models,
	      open the icon view of your gretl session, by selecting
	      <quote>Icon view</quote> under the Session menu in the
	      main gretl window, or by clicking the <quote>session
		icon view</quote> icon on the gretl toolbar.</para>
	  </listitem>
	  <listitem><para>In session icon view, there is an icon
	      labeled <quote>Model table</quote>. Decide which model
	      you wish to appear in the left-most column of the model
	      table and add it to the table, either by dragging its
	      icon onto the Model table icon, or by right-clicking on
	      the model icon and selecting <quote>Add to model
		table</quote> from the pop-up menu.</para>
	  </listitem>
	  <listitem><para>Repeat step 4 for the other models you wish
	      to include in the table.  The second model selected will
	      appear in the second column from the left, and so
	      on.</para>
	  </listitem>
	  <listitem><para>When you are finished composing the model
	      table, display it by double-clicking on its icon.  Under
	      the Edit menu in the window which appears, you have the
	      option of copying the table to the clipboard in various
	      formats.</para>
	  </listitem>
	  <listitem><para>If the ordering of the models in the table
	      is not what you wanted, right-click on the model table
	      icon and select <quote>Clear table</quote>.  Then go
	      back to step 4 above and try again.</para>
	  </listitem>
	</orderedlist>

      <para>A simple instance of <application>gretl</application>'s
	model table is shown in <xref
	  linkend="fig-model-table"/>.</para>

      <figure id="fig-model-table" float="1" pgwide="1">
	<title>Example of model table</title>
	<graphic fileref="figures/model_table" align="center"/>
      </figure>      

    </sect2>

    <sect2 id="session-save"><title>Saving and re-opening
	sessions</title>    

      <para>If you create models or graphs that you think you may wish
	to re-examine later, then before quitting
	<application>gretl</application> select <quote>Save
	  as&hellip;</quote> from the Session menu and give a name
	under which to save the session.  To re-open the session
	later, either</para>

      <itemizedlist>
	<listitem><para>Start <application>gretl</application> then
	    re-open the session file by going to the
	    <quote>Open</quote> item under the Session menu,
	    or</para></listitem>
	<listitem><para>From the command line, type <command>gretl
	      -r</command> <replaceable>sessionfile</replaceable>,
	    where <replaceable>sessionfile</replaceable> is the name
	    under which the session was saved.</para></listitem>
      </itemizedlist>

    </sect2>

    </sect1>

  </chapter>

<!-- Keep this comment at the end of the file
Local variables:
sgml-default-dtd-file:"../manual.ced"
mode: xml
sgml-parent-document:("../manual.xml" "book" "chapter")
End:
-->


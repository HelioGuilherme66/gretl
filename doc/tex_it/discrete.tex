\chapter{Variabili discrete}
\label{chap-discrete}

Quando una variabile può assumere solo un numero finito, tipicamente basso, di
valori, essa si può chiamare \emph{discreta}. Alcuni comandi di
\app{gretl} si comportano in modo leggermente diverso quando sono usati su
variabili discrete; in più, \app{gretl} fornisce alcuni comandi che si applicano
solo alle variabili discrete.


\section{Dichiarazione delle variabili discrete}
\label{discr-declare}

Quando si crea un file di dati da zero, nessuna variabile viene considerata
discreta. Per marcare una variabile come discreta, è possibile agire in due
modi:
\begin{enumerate}
\item Dall'interfaccia grafica, selezionare ``Variabile, Modifica attributi''
  dal menù. Apparirà una finestra di dialogo in cui appare la casella
  ``Tratta questa variabile come discreta''. La stessa finestra di dialogo può
  essere richiamata dal menù contestuale (facendo clic col tasto destro su una
  variabile) o premendo il tasto F2;
\item Dall'interfaccia a riga di comando, usando il comando \texttt{discrete}.
  Il comando accetta uno o più argomenti, che possono essere variabili o liste
  di variabili. Ad esempio:
\begin{code}
  list xlist = x1 x2 x3
  discrete z1 xlist z2
\end{code}
In questo modo è possibile dichiarare più variabili discrete con un solo
comando, cosa che al momento non è possibile fare usando l'interfaccia grafica.
L'opzione \texttt{--reverse} inverte la dichiarazione, ossia rende continua una
variabile discreta.
Ad esempio:
\begin{code}
  discrete pippo
  # ora pippo è discreta
  discrete pippo --reverse
  # ora piipo è continua
\end{code}
\end{enumerate}

Si noti che marcare una variabile come discreta non ne modifica il contenuto. È
quindi responsabilità dell'utente usare correttamente questa funzione. Per
ricodificare una variabile continua in classi, è possibile usare il comando
\texttt{genr} e le sue funzioni aritmetiche come nell'esempio seguente:
\begin{code}
  nulldata 100
  # genera una variabile con media 2 e varianza 1
  genr x = normal() + 2
  # suddivide in 4 classi
  genr z = (x>0) + (x>2) + (x>4)
  # ora dichiara z come discreta
  discrete z
\end{code}

Quando si marca una variabile come discreta, questa impostazione viene ricordata
dopo il salvataggio del file.

\section{Comandi per le variabili discrete}
\label{discr-commands}

\subsection{Il comando \texttt{dummify}}
\label{discr-dummify}

Il comando \texttt{dummify} prende come argomento una serie $x$ e crea delle
variabili dummy per ognuno dei valori distinti presenti in $x$, che deve essere
stata dichiarata discreta in precedenza. Ad esempio:
\begin{code}
  open greene22_2
  discrete Z5 # marca Z5 come discreta
  dummify Z5
\end{code}

L'effetto di questi comandi è quello di generare 5 nuove variabili dummy, i cui
nomi vanno da \texttt{DZ5\_1} fino a \texttt{DZ5\_5}, che corrispondono ai
diversi valori presenti in \texttt{Z5}. Ossia, la variabile
\texttt{DZ5\_4} vale 1 dove \texttt{Z5} vale 4, e 0 altrove. Questa funzionalità
è disponibile anche con l'interfaccia grafica.


Il comando \texttt{dummify} può essere usato anche con la sintassi seguente:
\begin{code}
  list dlist = dummify(x)
\end{code}
che crea non solo le variabili dummy, ma anche una lista (si veda il paragrafo~\ref{named-lists})
che può essere usata in seguito. L'esempio seguente calcola le statistiche
descrittive per la variabile \texttt{Y} in corrispondenza di ogni valore di
\texttt{Z5}:
\begin{code}
  open greene22_2
  discrete Z5 # marca Z5 come discreta
  list foo = dummify(Z5)
  loop foreach i foo
    smpl $i --restrict --replace
    summary Y
  end loop
  smpl full
\end{code}
% $

Poiché \texttt{dummify} genera una lista, può anche essere usato direttamente in
comandi come \texttt{ols}, come in questo esempio:
\begin{code}
  open greene22_2
  discrete Z5 # marca Z5 come discreta
  ols Y 0 dummify(Z5)
\end{code}

\subsection{Il comando \texttt{freq}}
\label{discr-freq}

Il comando \texttt{freq} mostra le frequenze assolute e relative per una
variabile. Il modo in cui le frequenze vengono calcolate dipende dal carattere
discreto o continuo della variabile.

Per variabili discrete, le frequenze sono contate per ogni diverso valore
assunto dalla variabile. Per le variabili continue, i valori sono raggruppati in
``classi'' e quindi le frequenze sono calcolate per ogni classe.
Il numero di classi è calcolato in funzione del numero di osservazioni valide
nel campione selezionato al momento, nel modo seguente:

\begin{table}[htbp]
  \centering
  \begin{tabular}{cc}
\hline
  Osservazioni & Classi \\
\hline
  $8 \le n < 16$ & 5 \\
  $16 \le n < 50 $ & 7 \\
  $50 \le n \le 850 $ & $\lceil \sqrt{n} \rceil$  \\
  $n > 850 $ & 29 \\
\hline
\end{tabular}
\caption{Numero di classi per varie ampiezze campionarie}
\label{tab:bins}
\end{table}

Ad esempio, il codice seguente
\begin{code}
  open greene19_1
  freq TUCE
  discrete TUCE # marca TUCE come discreta
  freq TUCE
\end{code}
produce questo risultato
\begin{code}
gretl version 1.5.1
Current session: 2006/06/26 16:19
? open greene19_1

Read datafile /usr/local/share/gretl/data/greene/greene19_1.gdt
periodicity: 1, maxobs: 32,
observations range: 1-32

Listing 5 variables:
  0) const    1) GPA      2) TUCE     3) PSI      4) GRADE  

? freq TUCE

Frequency distribution for TUCE, obs 1-32
number of bins = 7, mean = 21.9375, sd = 3.90151

       interval          midpt   frequency    rel.     cum.

          <  13.417     12.000        1      3.12%    3.12% *
    13.417 - 16.250     14.833        1      3.12%    6.25% *
    16.250 - 19.083     17.667        6     18.75%   25.00% ******
    19.083 - 21.917     20.500        6     18.75%   43.75% ******
    21.917 - 24.750     23.333        9     28.12%   71.88% **********
    24.750 - 27.583     26.167        7     21.88%   93.75% *******
          >= 27.583     29.000        2      6.25%  100.00% **

Test for null hypothesis of normal distribution:
Chi-square(2) = 1.872 with p-value 0.39211
? discrete TUCE # mark TUCE as discrete
? freq TUCE

Frequency distribution for TUCE, obs 1-32

          frequency    rel.     cum.

  12           1      3.12%    3.12% *
  14           1      3.12%    6.25% *
  17           3      9.38%   15.62% ***
  19           3      9.38%   25.00% ***
  20           2      6.25%   31.25% **
  21           4     12.50%   43.75% ****
  22           2      6.25%   50.00% **
  23           4     12.50%   62.50% ****
  24           3      9.38%   71.88% ***
  25           4     12.50%   84.38% ****
  26           2      6.25%   90.62% **
  27           1      3.12%   93.75% *
  28           1      3.12%   96.88% *
  29           1      3.12%  100.00% *

Test for null hypothesis of normal distribution:
Chi-square(2) = 1.872 with p-value 0.39211
\end{code}


\subsection{The \texttt{xtab} command}
\label{discr-xtab}

\ldots More to follow \ldots


%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "gretl-guide"
%%% End: 

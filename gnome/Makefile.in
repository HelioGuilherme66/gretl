topsrc = @top_srcdir@

tooldir = $(topsrc)/tools
docdir = $(topsrc)/doc

INSTALL = @INSTALL@
prefix = @prefix@
gnome_prefix = @gnome_prefix@

ifeq ($(gnome_prefix),NA)
  gnome_prefix = $(prefix)
endif

ifeq ($(gnome_prefix),/usr)
  etcdir = /etc
else
  etcdir = $(gnome_prefix)/etc
endif

ifeq ($(INSTALL_DATA),)
  INSTALL_DATA = $(INSTALL) -m 644
endif

desktopdir = $(DESTDIR)$(gnome_prefix)/share/applications
mimedir = $(DESTDIR)$(gnome_prefix)/share/mime-info
gpixmaps = $(DESTDIR)$(gnome_prefix)/share/pixmaps
schemadir = $(DESTDIR)$(etcdir)/gconf/schemas

install: install-images install-misc

install-images:
	$(tooldir)/mkinstalldirs $(gpixmaps)
	$(INSTALL_DATA) $(topsrc)/pixmaps/gretl.xpm $(gpixmaps)
	$(INSTALL_DATA) $(topsrc)/pixmaps/gretl-logo.xpm $(gpixmaps)
	$(INSTALL_DATA) $(topsrc)/gnome/gnome-*.png $(gpixmaps)

install-misc:
	$(tooldir)/mkinstalldirs $(desktopdir)
	$(INSTALL_DATA) gretl.desktop $(desktopdir)
	$(tooldir)/mkinstalldirs $(mimedir)
	$(INSTALL_DATA) $(topsrc)/gnome/gretl.mime $(mimedir)
	$(INSTALL_DATA) gretl.keys $(mimedir)




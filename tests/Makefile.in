CC = @CC@
CFLAGS = @CFLAGS@
have_gtk = @have_gtk@
GMP_LIBS = @GMP_LIBS@

ifeq ($(CC),)
  CC = gcc
endif

ifeq ($(have_gtk),2.0)
  LIBGRETL = ../lib/libgretl-2.la
else
  LIBGRETL = ../lib/libgretl.la
endif

ifeq ($(GMP_LIBS),)
  DEFINES = -DNO_GMP
else
  DEFINES = -DUSE_GMP
endif

override CFLAGS += -I../lib/src $(DEFINES)

SRC = nistcheck.c
OBJ = nistcheck.o
PROG = nistcheck

all: $(PROG)

$(PROG): $(OBJ)
	../libtool --mode=link $(CC) -o $@ $< \
	$(LIBGRETL)

.PHONY :

check: $(PROG)
	./$(PROG)

clean:
	rm -f $(PROG) $(OBJ)

tooldir = ../tools

CC = @CC@
CFLAGS = @CFLAGS@
have_gtk = @have_gtk@
GMP_LIBS = @GMP_LIBS@

ifeq ($(CC),)
  CC = gcc
endif

ifeq ($(have_gtk),2.0)
  LIBGRETL = ../lib/libgretl-2.la
else
  LIBGRETL = ../lib/libgretl.la
endif

ifeq ($(GMP_LIBS),)
  DEFINES = -DNO_GMP
else
  DEFINES = -DUSE_GMP
endif

override CFLAGS += -I../lib/src $(DEFINES)

SRC = nistcheck.c
OBJ = nistcheck.o
PROG = nistcheck

all: $(PROG)

$(PROG): $(OBJ)
	../libtool --mode=link $(CC) -o $@ $< \
	$(LIBGRETL)

.PHONY :

check: $(PROG)
	./$(PROG)

clean:
	rm -f $(PROG) $(OBJ) test.out
	rm -rf .libs

depend:
	makedepend -Y../lib/src *.c 

distdepend: depend
	$(tooldir)/dist_depend.pl

# DO NOT DELETE

nistcheck.o: ../lib/src/libgretl.h ../lib/src/commands.h ../lib/src/errors.h
nistcheck.o: ../lib/src/estimate.h ../lib/src/generate.h
nistcheck.o: ../lib/src/gretl_utils.h ../lib/src/compare.h
nistcheck.o: ../lib/src/pvalues.h ../lib/src/dataio.h ../lib/src/strutils.h
nistcheck.o: ../lib/src/describe.h ../lib/src/printout.h
nistcheck.o: ../lib/src/texprint.h ../lib/src/var.h ../lib/src/interact.h
nistcheck.o: ../lib/src/graphing.h ../lib/src/monte_carlo.h
nistcheck.o: ../lib/src/nonparam.h ../lib/src/discrete.h
nistcheck.o: ../lib/src/subsample.h ../lib/src/calendar.h

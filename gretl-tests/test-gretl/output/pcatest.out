gretl version 2016b-git
Copyright Ramu Ramanathan, Allin Cottrell and Riccardo "Jack" Lucchetti
This is free software with ABSOLUTELY NO WARRANTY
Current session: 2016-04-07 14:09
? run pcatest.inp
 /home/cottrell/stats/test-gretl/pcatest.inp
? open data4-10

Read datafile /opt/esl/share/gretl/data/data4-10.gdt
periodicity: 1, maxobs: 51
observations range: 1 to 51

Listing 10 variables:
  0) const      1) ENROLL     2) CATHOL     3) PUPIL      4) WHITE    
  5) ADMEXP     6) REV        7) MEMNEA     8) INCOME     9) COLLEGE  

? list vars = MEMNEA ADMEXP
Generated list vars
# compare pca and princomp() in the full sample
? matrix P1 = princomp({vars}, 1)
Generated matrix P1
? pca vars --save=1
Principal Components Analysis

Eigenanalysis of the Correlation Matrix

Component  Eigenvalue  Proportion   Cumulative
    1       1.0959       0.5479       0.5479
    2       0.9041       0.4521       1.0000

Eigenvectors (component loadings)

               PC1      PC2
MEMNEA      -0.707   -0.707
ADMEXP       0.707   -0.707

Generated principal component series
? matrix chk = P1 ~ {PC1} ~ (P1-{PC1})
Generated matrix chk

    -1.014092440269    -1.014092440269     0.000000000000
    -1.176222330023    -1.176222330023     0.000000000000
     0.921830419715     0.921830419715     0.000000000000
     0.558999241996     0.558999241996    -0.000000000000
     0.798088383565     0.798088383565     0.000000000000
     0.020870992166     0.020870992166     0.000000000000
    -0.567379288449    -0.567379288449     0.000000000000
    -1.448145553164    -1.448145553164     0.000000000000
     1.650340628216     1.650340628216    -0.000000000000
     2.057302707640     2.057302707640     0.000000000000
     0.610580092505     0.610580092505    -0.000000000000
    -0.644966136280    -0.644966136280     0.000000000000
    -0.097534288367    -0.097534288367     0.000000000000
     0.908211528690     0.908211528690     0.000000000000
    -0.139672449471    -0.139672449471     0.000000000000
    -0.130908022281    -0.130908022281     0.000000000000
     0.553313554454     0.553313554454     0.000000000000
    -2.226772060985    -2.226772060985     0.000000000000
     1.584253265312     1.584253265312     0.000000000000
    -1.647171486440    -1.647171486440     0.000000000000
    -0.388058013313    -0.388058013313     0.000000000000
    -1.037922152382    -1.037922152382     0.000000000000
     0.395296292848     0.395296292848     0.000000000000
    -0.446061137036    -0.446061137036     0.000000000000
     0.999423480459     0.999423480459     0.000000000000
     1.330219291403     1.330219291403     0.000000000000
    -0.210431213051    -0.210431213051     0.000000000000
    -1.089966174486    -1.089966174486     0.000000000000
     0.046616964135     0.046616964135     0.000000000000
    -0.417669013901    -0.417669013901    -0.000000000000
    -1.055735402317    -1.055735402317     0.000000000000
     1.709778682909     1.709778682909     0.000000000000
     1.224309143926     1.224309143926    -0.000000000000
    -0.685898808653    -0.685898808653     0.000000000000
    -0.520748021260    -0.520748021260     0.000000000000
     0.391583744272     0.391583744272    -0.000000000000
    -0.973154036432    -0.973154036432    -0.000000000000
     0.108110851454     0.108110851454     0.000000000000
    -0.045039520492    -0.045039520492    -0.000000000000
    -0.183911377935    -0.183911377935    -0.000000000000
     1.091676496538     1.091676496538     0.000000000000
     0.279169111369     0.279169111369     0.000000000000
    -1.958440452388    -1.958440452388     0.000000000000
     1.500453021973     1.500453021973     0.000000000000
    -1.115033402792    -1.115033402792     0.000000000000
    -0.793191776556    -0.793191776556     0.000000000000
    -0.377104875089    -0.377104875089     0.000000000000
    -0.165735325904    -0.165735325904     0.000000000000
     2.465769022972     2.465769022972     0.000000000000
    -0.628371282351    -0.628371282351     0.000000000000
    -0.020860876453    -0.020860876453    -0.000000000000

# and using covariance matrix
? P1 = princomp({vars}, 1, 1)
Replaced matrix P1
? pca vars --save=1 --covariance
Principal Components Analysis

Eigenanalysis of the Covariance Matrix

Component  Eigenvalue  Proportion   Cumulative
    1       0.0562       0.9708       0.9708
    2       0.0017       0.0292       1.0000

Eigenvectors (component loadings)

               PC1      PC2
MEMNEA      -1.000   -0.017
ADMEXP       0.017   -1.000

Generated principal component series
? matrix chk = P1 ~ {PC11} ~ (P1-{PC11})
Replaced matrix chk

    -1.041723890258    -1.041723890258    -0.000000000000
    -0.676370494740    -0.676370494740     0.000000000000
     0.292408813112     0.292408813112     0.000000000000
     0.802085921166     0.802085921166     0.000000000000
    -0.263110501966    -0.263110501966     0.000000000000
    -0.505866609920    -0.505866609920     0.000000000000
    -0.267364490942    -0.267364490942     0.000000000000
    -0.894381349760    -0.894381349760     0.000000000000
     2.844715411801     2.844715411801    -0.000000000000
     1.779049678326     1.779049678326     0.000000000000
     1.065295243871     1.065295243871    -0.000000000000
    -1.114383593775    -1.114383593775     0.000000000000
    -0.364097171152    -0.364097171152     0.000000000000
     0.748836176394     0.748836176394     0.000000000000
     0.028219612948     0.028219612948     0.000000000000
    -1.101030315556    -1.101030315556    -0.000000000000
    -0.133538486378    -0.133538486378     0.000000000000
    -0.473171618043    -0.473171618043     0.000000000000
     1.110156024849     1.110156024849     0.000000000000
    -0.723904453257    -0.723904453257     0.000000000000
    -0.275430036480    -0.275430036480     0.000000000000
    -0.647303118130    -0.647303118130     0.000000000000
    -0.618601965133    -0.618601965133    -0.000000000000
    -0.452583572092    -0.452583572092     0.000000000000
     1.448631642499     1.448631642499     0.000000000000
     1.726104327207     1.726104327207     0.000000000000
    -0.119401991861    -0.119401991861     0.000000000000
    -1.125225403583    -1.125225403583     0.000000000000
    -0.302972126875    -0.302972126875     0.000000000000
     0.134600198721     0.134600198721     0.000000000000
    -1.124391418213    -1.124391418213     0.000000000000
     1.359002106386     1.359002106386     0.000000000000
     2.575284491878     2.575284491878     0.000000000000
    -0.101972361222    -0.101972361222    -0.000000000000
    -0.843601816629    -0.843601816629     0.000000000000
    -0.409793486087    -0.409793486087     0.000000000000
    -0.627073442467    -0.627073442467    -0.000000000000
    -1.096035915639    -1.096035915639     0.000000000000
    -0.289869376062    -0.289869376062     0.000000000000
     0.917034655876     0.917034655876     0.000000000000
     1.436372389358     1.436372389358     0.000000000000
    -0.140632118173    -0.140632118173     0.000000000000
    -0.878629202162    -0.878629202162     0.000000000000
     1.610052055117     1.610052055117     0.000000000000
    -0.661201805106    -0.661201805106     0.000000000000
    -0.705585312026    -0.705585312026     0.000000000000
     0.191958040381     0.191958040381     0.000000000000
    -1.102707798597    -1.102707798597     0.000000000000
     0.216042188351     0.216042188351     0.000000000000
    -0.757939241467    -0.757939241467     0.000000000000
    -0.445954494491    -0.445954494491     0.000000000000

# now compare them in the reduced sample
? smpl 20 ;
Full data range: 1 - 51 (n = 51)
Current sample: 20 - 51 (n = 32)

? matrix P2 = princomp({vars}, 1)
Generated matrix P2
? pca vars --save=1
Principal Components Analysis

Eigenanalysis of the Correlation Matrix

Component  Eigenvalue  Proportion   Cumulative
    1       1.0415       0.5207       0.5207
    2       0.9585       0.4793       1.0000

Eigenvectors (component loadings)

               PC1      PC2
MEMNEA      -0.707   -0.707
ADMEXP       0.707   -0.707

Generated principal component series
? matrix chk = P2 ~ {PC12} ~ (P2-{PC12})
Replaced matrix chk

    -1.585544215501    -1.585544215501     0.000000000000
    -0.321949319253    -0.321949319253     0.000000000000
    -0.976909992259    -0.976909992259     0.000000000000
     0.451857925187     0.451857925187     0.000000000000
    -0.383261444522    -0.383261444522    -0.000000000000
     1.094853082403     1.094853082403     0.000000000000
     1.429991367251     1.429991367251     0.000000000000
    -0.141851295687    -0.141851295687     0.000000000000
    -1.038246756247    -1.038246756247    -0.000000000000
     0.110657268438     0.110657268438     0.000000000000
    -0.343327587844    -0.343327587844     0.000000000000
    -1.004119335903    -1.004119335903     0.000000000000
     1.800943473861     1.800943473861     0.000000000000
     1.341287509464     1.341287509464     0.000000000000
    -0.615308117994    -0.615308117994    -0.000000000000
    -0.465438858858    -0.465438858858     0.000000000000
     0.452298096946     0.452298096946     0.000000000000
    -0.911967650734    -0.911967650734     0.000000000000
     0.156212955795     0.156212955795    -0.000000000000
     0.019581558681     0.019581558681    -0.000000000000
    -0.094876538179    -0.094876538179     0.000000000000
     1.186539957094     1.186539957094     0.000000000000
     0.345613412123     0.345613412123     0.000000000000
    -1.898790513308    -1.898790513308    -0.000000000000
     1.597328104436     1.597328104436    -0.000000000000
    -1.054026724487    -1.054026724487     0.000000000000
    -0.734192201701    -0.734192201701     0.000000000000
    -0.301768372348    -0.301768372348     0.000000000000
    -0.116806406958    -0.116806406958     0.000000000000
     2.531626447661     2.531626447661     0.000000000000
    -0.570986895133    -0.570986895133     0.000000000000
     0.040581067576     0.040581067576    -0.000000000000

# and using covariance matrix
? P2 = princomp({vars}, 1, 1)
Replaced matrix P2
? pca vars --save=1 --covariance
Principal Components Analysis

Eigenanalysis of the Covariance Matrix

Component  Eigenvalue  Proportion   Cumulative
    1       0.0535       0.9690       0.9690
    2       0.0017       0.0310       1.0000

Eigenvectors (component loadings)

               PC1      PC2
MEMNEA      -1.000   -0.008
ADMEXP       0.008   -1.000

Generated principal component series
? matrix chk = P2 ~ {PC13} ~ (P2-{PC13})
Replaced matrix chk

    -0.667050824493    -0.667050824493    -0.000000000000
    -0.221072329014    -0.221072329014     0.000000000000
    -0.596547097109    -0.596547097109     0.000000000000
    -0.587466497935    -0.587466497935    -0.000000000000
    -0.403561203822    -0.403561203822     0.000000000000
     1.543072311798     1.543072311798     0.000000000000
     1.825449468389     1.825449468389     0.000000000000
    -0.062165759294    -0.062165759294     0.000000000000
    -1.090365536774    -1.090365536774     0.000000000000
    -0.255827447458    -0.255827447458     0.000000000000
     0.203664332967     0.203664332967     0.000000000000
    -1.089994994127    -1.089994994127     0.000000000000
     1.440101090533     1.440101090533     0.000000000000
     2.705728374716     2.705728374716     0.000000000000
    -0.037288398408    -0.037288398408     0.000000000000
    -0.807123166186    -0.807123166186     0.000000000000
    -0.371332289159    -0.371332289159     0.000000000000
    -0.576544707184    -0.576544707184     0.000000000000
    -1.077396544142    -1.077396544142     0.000000000000
    -0.240949668502    -0.240949668502     0.000000000000
     1.009986029781     1.009986029781     0.000000000000
     1.529058825106     1.529058825106     0.000000000000
    -0.091179310180    -0.091179310180     0.000000000000
    -0.822685957344    -0.822685957344     0.000000000000
     1.702906159867     1.702906159867    -0.000000000000
    -0.609820420239    -0.609820420239     0.000000000000
    -0.660380135121    -0.660380135121     0.000000000000
     0.262436206961     0.262436206961     0.000000000000
    -1.080360885315    -1.080360885315     0.000000000000
     0.246457860855     0.246457860855     0.000000000000
    -0.716928753236    -0.716928753236     0.000000000000
    -0.402818735930    -0.402818735930     0.000000000000

Done
